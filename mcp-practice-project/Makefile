.PHONY: help install build test clean run-python run-typescript demo

help:
	@echo "Comandos disponibles:"
	@echo "  install          - Instalar todas las dependencias"
	@echo "  build           - Compilar proyectos"
	@echo "  test            - Ejecutar tests"
	@echo "  clean           - Limpiar archivos generados"
	@echo "  run-python      - Ejecutar servidor Python"
	@echo "  run-typescript  - Ejecutar servidor TypeScript"
	@echo "  demo            - Ejecutar demo completo"

install:
	@echo "ğŸ“¦ Instalando dependencias Python..."
	cd python-server && pip install -r requirements.txt
	@echo "ğŸ“¦ Instalando dependencias TypeScript..."
	cd typescript-server && npm install

build:
	@echo "ğŸ”¨ Compilando TypeScript..."
	cd typescript-server && npm run build

test:
	@echo "ğŸ§ª Ejecutando tests Python..."
	cd python-server && python -m pytest tests/ || echo "No tests found"
	@echo "ğŸ§ª Ejecutando tests TypeScript..."
	cd typescript-server && npm test || echo "No tests found"

clean:
	@echo "ğŸ§¹ Limpiando archivos generados..."
	rm -rf typescript-server/dist/
	rm -rf python-server/src/*.egg-info/
	rm -rf **/__pycache__/
	rm -rf **/node_modules/.cache/

run-python:
	@echo "ğŸ Iniciando servidor Python..."
	cd python-server && python server.py

run-typescript:
	@echo "ğŸ“˜ Iniciando servidor TypeScript..."
	cd typescript-server && npm run start

demo:
	@echo "ğŸ® Ejecutando demo completo..."
	cd client-examples && python python_client.py